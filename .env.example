# ============================================
# CONFIGURACIÓN DEL TRADING BOT - ÍNDICES SINTÉTICOS
# ============================================
# Copia este archivo a .env y completa los valores requeridos

# ==================== TELEGRAM ====================
# Token del bot de Telegram (obtener de @BotFather)
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# ID del canal de Telegram (puede ser @nombre_canal o -1001234567890)
TELEGRAM_CHANNEL_ID=@tu_canal_trading

# Incluir gráficos en las notificaciones (true/false)
TELEGRAM_INCLUDE_CHARTS=true

# ==================== METATRADER 5 ====================
# Credenciales de la cuenta MT5
MT5_LOGIN=12345678
MT5_PASSWORD=tu_contraseña_mt5
MT5_SERVER=Weltrade-Demo

# Ruta de instalación de MT5 (dejar vacío para auto-detectar en Windows)
MT5_PATH=

# Número mágico para identificar las operaciones del bot
MT5_MAGIC_NUMBER=234000

# Activar trading automático (true/false)
# ADVERTENCIA: false = solo notificaciones, true = ejecuta trades reales
MT5_AUTO_TRADING=true

# Tamaño de lote base (usado como fallback o si el lotaje dinámico está desactivado)
MT5_LOT_SIZE=0.30

# Máximo de posiciones abiertas simultáneamente
MT5_MAX_OPEN_POSITIONS=20

# ==================== TRADING ====================
# Símbolos a operar (separados por coma, entre comillas si hay espacios)
# Todos los índices sintéticos disponibles
TRADING_SYMBOLS="PainX 400,GainX 400,PainX 600,GainX 600,PainX 800,GainX 800,PainX 999,GainX 999,PainX 1200,GainX 1200"

# Timeframes a analizar (separados por coma)
# Valores válidos: 1m, 5m, 15m, 1h, 4h, 1d
TIMEFRAMES="1m,5m,15m,1h,4h,1d"

# ==================== IA Y SEÑALES ====================
# Umbral de confianza mínimo para generar señales (0.0 - 1.0)
# Valores recomendados: 0.50 = más señales, 0.75 = señales más selectivas
CONFIDENCE_THRESHOLD=0.50

# ==================== GESTIÓN DE RIESGOS ====================
# Período para calcular el ATR (Average True Range)
ATR_PERIOD=14

# Límites de señales
MAX_SIGNALS_PER_DAY=30
MAX_SIGNALS_PER_PAIR=5

# Multiplicadores de ATR para Stop Loss y Take Profit
STOP_LOSS_ATR_MULTIPLIER=1.5
TAKE_PROFIT_1_ATR_MULTIPLIER=2.0
TAKE_PROFIT_2_ATR_MULTIPLIER=4.0

# Reglas específicas para índices sintéticos
# GainX solo señales BUY, PainX solo señales SELL
ENFORCE_GAINX_BUY_ONLY=true
ENFORCE_PAINX_SELL_ONLY=true

# ==================== GESTIÓN DE TRADES ABIERTOS ====================
# Break Even (mover SL a punto de equilibrio)
# Valores en múltiplos de ATR
ENABLE_BREAK_EVEN=true
BREAK_EVEN_TRIGGER_ATR_MULTIPLIER=1.0
BREAK_EVEN_PROFIT_LOCK_ATR_MULTIPLIER=0.2

# Trailing Stop (SL dinámico que sigue el precio)
# Valores en múltiplos de ATR
ENABLE_TRAILING_STOP=true
TRAILING_STOP_TRIGGER_ATR_MULTIPLIER=2.0
TRAILING_STOP_DISTANCE_ATR_MULTIPLIER=1.5

# ==================== LOTAJE DINÁMICO ====================
# Ajustar tamaño de lote según confianza de la señal
ENABLE_DYNAMIC_LOT_SIZE=true
MIN_LOT_SIZE=0.10
MAX_LOT_SIZE=1.00
# El lotaje se escalará linealmente entre MIN y MAX basado en la confianza de la señal
# (desde CONFIDENCE_THRESHOLD hasta 1.0)

# ==================== LOGGING ====================
# Nivel de logging: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Archivo de log (ruta relativa desde la raíz del proyecto)
LOG_FILE=logs/trading_bot.log

# ==================== FILTROS AVANZADOS ====================
# Estos filtros ayudan a mejorar la rentabilidad reduciendo señales de baja calidad
# Puedes activar/desactivar cada filtro individualmente y ajustar sus parámetros

# --- Activación de Filtros (true/false) ---
# Filtro de divergencias RSI/MACD (detecta cuando RSI está alto pero precio sigue subiendo)
ENABLE_DIVERGENCE_FILTER=true

# Filtro de pérdidas consecutivas (pausa trading después de X pérdidas seguidas)
ENABLE_CONSECUTIVE_LOSSES_FILTER=true

# Filtro de tendencia mejorado (ADX + alineación de EMAs)
ENABLE_ENHANCED_TREND_FILTER=true

# Filtro de momentum (evita operar contra momentum muy fuerte)
ENABLE_MOMENTUM_FILTER=true

# Filtro de proximidad a soporte/resistencia (opera solo cerca de niveles clave)
ENABLE_SR_PROXIMITY_FILTER=true

# --- Parámetros del Filtro de Pérdidas Consecutivas ---
# Máximo de pérdidas consecutivas antes de activar enfriamiento
MAX_CONSECUTIVE_LOSSES=2

# Horas de enfriamiento después de alcanzar el máximo de pérdidas
COOLDOWN_HOURS=2.0

# --- Parámetros del Filtro de Tendencia Mejorado ---
# ADX mínimo para considerar tendencia fuerte (evita mercados laterales)
# Valores típicos: 20-30 (25 es equilibrado)
MIN_ADX_FOR_TREND=25.0

# Requiere alineación de EMAs (9>21>50 para BUY, inverso para SELL)
EMA_ALIGNMENT_REQUIRED=true

# Máximo % de distancia del precio al SMA50 para operar
# Si precio está >3% arriba de SMA50, no permitir SELL
# Si precio está >3% debajo de SMA50, no permitir BUY
MAX_PERCENT_FROM_SMA50=3.0

# --- Parámetros del Filtro de Momentum ---
# Máximo % de cambio de precio en últimas 5 velas
# Si precio subió >2% en 5 velas, evitar SELL (momentum alcista fuerte)
# Si precio cayó >2% en 5 velas, evitar BUY (momentum bajista fuerte)
MAX_MOMENTUM_PERCENT=2.0

# --- Parámetros del Filtro de Soporte/Resistencia ---
# % de proximidad requerida a S/R para considerar "cerca"
# 0.5% = debe estar muy cerca del nivel
SR_PROXIMITY_PERCENT=0.5

# % de distancia máxima a S/R para rechazar señal
# >1.5% de distancia = "en medio de la nada", rechazar
SR_MAX_DISTANCE_PERCENT=1.5

# --- Parámetros del Filtro de Divergencias ---
# Nivel de RSI para considerar sobrecompra (típicamente 70)
DIVERGENCE_RSI_OVERBOUGHT=70.0

# Nivel de RSI para considerar sobreventa (típicamente 30)
DIVERGENCE_RSI_OVERSOLD=30.0

# % de momentum mínimo para detectar divergencia
# Si RSI >70 y precio sube >1.5%, hay divergencia alcista
DIVERGENCE_MOMENTUM_THRESHOLD=1.5
